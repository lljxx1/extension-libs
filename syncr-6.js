window.driver = "let modules =!function(e){var t={};function a(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=0)}([function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.getDriver=function(e){if(\"wordpress\"==e.type)return new n.a(e.params.wpUrl,e.params.wpUser,e.params.wpPwd);if(\"zhihu\"==e.type)return new s.a;if(\"jianshu\"==e.type)return new r.a;if(\"typecho\"==e.type)return new n.a(e.params.wpUrl,e.params.wpUser,e.params.wpPwd,!0);if(\"toutiao\"==e.type)return new i.a;if(\"weibo\"==e.type)return new o.a;if(\"segmentfault\"==e.type)return new c.a(e);if(\"juejin\"==e.type)return new d.a(e);if(\"csdn\"==e.type)return new l.a(e);if(\"cnblog\"==e.type)return new p.a(e);if(\"weixin\"==e.type)return new u.a(e);if(\"yidian\"==e.type)return new m.a(e);throw Error(\"not supprt account type\")},t.getPublicAccounts=async function(){console.log(\"getPublicAccounts\");var e=[new c.a,new l.a,new d.a,new p.a,new o.a,new s.a,new r.a,new i.a,new u.a,new m.a],t=[];for(let r=0;r<e.length;r++){const s=e[r];try{var a=await s.getMetaData();t.push(a)}catch(e){console.log(e)}}return t},t.getMeta=function(){return{version:\"0.0.6\",versionNumber:6,log:\"\"}};var r=a(1),s=a(2),n=a(3),i=a(4),o=a(5),c=a(6),d=a(7),l=a(8),p=a(9),u=a(10),m=a(11)},function(e,t,a){\"use strict\";var r,s={};t.a=class{constructor(){this.name=\"jianshu\"}async getMetaData(){var e=await $.ajax({url:\"https://www.jianshu.com/settings/basic.json\"}),t=await $.get(\"https://www.jianshu.com/author/notebooks\");return{uid:e.data.avatar.split(\"/\")[5],title:e.data.nickname,avatar:e.data.avatar,type:\"jianshu\",displayName:\"简书\",supportTypes:[\"html\"],home:\"https://www.jianshu.com/settings/basic\",icon:\"https://www.jianshu.com/favicon.ico\",notebooks:t}}async addPost(e){var t=(await $.get(\"https://www.jianshu.com/author/notebooks\"))[0];r=t.id;var a=await $.ajax({url:\"https://www.jianshu.com/author/notes\",type:\"POST\",dataType:\"JSON\",headers:{accept:\"application/json\"},contentType:\"application/json\",data:JSON.stringify({at_bottom:!1,notebook_id:t.id,title:e.post_title})});return console.log(a),{status:\"success\",post_id:a.id,notebook_id:t.id}}async editPost(e,t){var a=s[e],n=t.notebook_id?t.notebook_id:r;if(a)s[e]++,a=s[e];else{var i=await $.get(\"https://www.jianshu.com/author/notebooks/\"+n+\"/notes\"),o=i.filter(t=>t.id==e)[0];console.log(e,i),s[e]=o.autosave_control,s[e]++,a=s[e]}console.log(\"currentNote\",a);var c={autosave_control:a};return t.post_content&&(c.content=t.post_content),e&&(c.id=e),t.post_title&&(c.title=t.post_title),await $.ajax({url:\"https://www.jianshu.com/author/notes/\"+e,type:\"PUT\",dataType:\"JSON\",contentType:\"application/json\",headers:{accept:\"application/json\"},data:JSON.stringify(c)}),{status:\"success\",notebook_id:n,post_id:e,draftLink:\"https://www.jianshu.com/writer#/notebooks/\"+n+\"/notes/\"+e}}async uploadFile(e){var t=e.src;try{t.indexOf(\"xitu.io\")>-1&&(t=t.replace(\"webp\",\"png\"));var a=await $.ajax({url:\"https://www.jianshu.com/upload_images/fetch\",type:\"POST\",contentType:\"application/json\",xhrFields:{withCredentials:!0},headers:{accept:\"application/json\"},data:JSON.stringify({url:t})});return console.log(\"uploadFile\",a),[a]}catch(e){console.log(\"JianShuDriver.uploadFile\",e);var r=e.responseJSON.error[0].message;throw new Error(r)}}async preEditPost(e){var t=$(\"<div>\");$(\"body\").append(t),t.html(e.content);var a=t,r=function(e,t){var a=$(this),r=a.text(),s=a.find(\"img\"),n=a.find(\"br\");\"\"==r&&(s.length||n.length&&a.remove());var i=a.find(\"strong\").eq(0);if(r==i.text()){var o=null,c=i,d=null;for(let e=0;e<4;e++){var l=c.css(\"font-size\"),p=c.css(\"text-align\");if(l&&(o=l),p&&(d=p),d&&o)break;if(c==a){console.log(\"near top\");break}c=c.parent()}if(o&&parseInt(o)>17&&\"center\"==d){var u=$(\"<h2></h2>\").append(a.html());a.after(u).remove()}}};a.find(\"p\").each(r),a.find(\"section\").each(r),a.find(\"br\").each(function(e,t){var a=$(this);a.next().length||a.remove()});var s=$(\"<div>\").append(a.clone());e.content=1==s.children(\"div\").length?s.children(\"div\").html():s.html()}}},function(e,t,a){\"use strict\";function r(e){return e.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&#039;\")}function s(e,t){return++t>4?null:e.children().length>1?e:s(e.children().eq(0),t)}function n(e){var t=[],a=(s(e,0),e.find(\"code\"));if(a.length>1)return function(e){var t=[],a=s(e,0).children();for(let e=0;e<a.length;e++){const s=a.eq(e).text();t.push(\"<code>\"+r(s)+\"</code>\")}return t.join(\"\\n\")}(e);for(let e=0;e<a.length;e++){const s=a.eq(e)[0].innerText;console.log(\"codeStr\",s),s.split(\"\\n\").forEach(e=>{t.push(\"<code>\"+r(e)+\"</code>\")})}return t.join(\"\\n\")}t.a=class{constructor(){this.skipReadImage=!0,this.version=\"0.0.1\",this.name=\"zhihu\"}async getMetaData(){var e=await $.ajax({url:\"https://www.zhihu.com/api/v4/me?include=account_status%2Cis_bind_phone%2Cis_force_renamed%2Cemail%2Crenamed_fullname\"});return{uid:e.uid,title:e.name,avatar:e.avatar_url,supportTypes:[\"html\"],type:\"zhihu\",displayName:\"知乎\",home:\"https://www.zhihu.com/settings/account\",icon:\"https://static.zhihu.com/static/favicon.ico\"}}async addPost(e){var t=await $.ajax({url:\"https://zhuanlan.zhihu.com/api/articles/drafts\",type:\"POST\",dataType:\"JSON\",contentType:\"application/json\",data:JSON.stringify({title:e.post_title})});return console.log(t),{status:\"success\",post_id:t.id}}async editPost(e,t){return console.log(\"editPost\",t.post_thumbnail),await $.ajax({url:\"https://zhuanlan.zhihu.com/api/articles/\"+e+\"/draft\",type:\"PATCH\",contentType:\"application/json\",data:JSON.stringify({title:t.post_title,content:t.post_content,isTitleImageFullScreen:!1,titleImage:\"https://pic1.zhimg.com/\"+t.post_thumbnail+\".png\"})}),{status:\"success\",post_id:e,draftLink:\"https://zhuanlan.zhihu.com/p/\"+e+\"/edit\"}}untiImageDone(e){return new Promise((t,a)=>{!async function a(){var r=await $.ajax({url:\"https://api.zhihu.com/images/\"+e,type:\"GET\"});\"processing\"!=r.status?t(r):setTimeout(a,300)}()})}async uploadFile(e){var t=e.src,a=await $.ajax({url:\"https://zhuanlan.zhihu.com/api/uploaded_images\",type:\"POST\",headers:{accept:\"*/*\",\"x-requested-with\":\"fetch\"},data:{url:t,source:\"article\"}});return[{id:a.hash,object_key:a.hash,url:a.src}]}async uploadFileRaw(e){var t=await $.ajax({url:\"https://api.zhihu.com/images\",type:\"POST\",dataType:\"JSON\",contentType:\"application/json\",data:JSON.stringify({image_hash:md5(e.bits),source:\"article\"})}),a=t.upload_file;if(1==t.upload_file.state){var r=await this.untiImageDone(a.image_id);console.log(\"imgDetail\",r),a.object_key=r.original_hash}else{var s=t.upload_token;let r=new OSS({endpoint:\"https://zhihu-pics-upload.zhimg.com\",accessKeyId:s.access_id,accessKeySecret:s.access_key,stsToken:s.access_token,cname:!0,bucket:\"zhihu-pics\"});var n=await r.put(a.object_key,new Blob([e.bits]));console.log(r,n)}return console.log(e,t),[{id:a.object_key,object_key:a.object_key,url:\"https://pic1.zhimg.com/80/\"+a.object_key+\"_hd.png\"}]}async preEditPost(e){var t=$(\"<div>\");$(\"body\").append(t),t.html(e.content);var a=t,r=a.find(\"pre\");console.log(\"find code blocks\",r.length,e);for(let e=0;e<r.length;e++){const t=r.eq(e);try{var s=n(t);s&&(console.log(s),t.html(s))}catch(e){}}var i=function(e,t){var a=$(this),r=a.text(),s=a.find(\"img\"),n=a.find(\"br\");\"\"==r&&(s.length||n.length&&a.remove());var i=a.find(\"strong\").eq(0);if(r==i.text()){var o=null,c=i,d=null;for(let e=0;e<4;e++){var l=c.css(\"font-size\"),p=c.css(\"text-align\");if(l&&(o=l),p&&(d=p),d&&o)break;if(c==a){console.log(\"near top\");break}c=c.parent()}if(o&&parseInt(o)>17&&\"center\"==d){var u=$(\"<h2></h2>\").append(a.html());a.after(u).remove()}}};a.find(\"p\").each(i),a.find(\"section\").each(i),a.find(\"br\").each(function(e,t){var a=$(this);a.next().length||a.remove()});var o=$(\"<div>\").append(a.clone());e.content=1==o.children(\"div\").length?o.children(\"div\").html():o.html()}}},function(e,t,a){\"use strict\";function r(e){return new Promise((t,a)=>{$.xmlrpc(e).then(function(e,a,r){t({response:e,status:a,xhr:r})},function(e,t,r){a({jqXHR:e,status:t,error:r})})})}class s{constructor(e,t,a,r){this.url=e,this.user=t,this.pwd=a,this.isTypecho=r}getRPC(){var e=this.url+\"/xmlrpc.php\";return this.isTypecho&&(e=this.url+\"/action/xmlrpc\"),e}async getMetaData(){var e=[this.user,this.pwd],t=await r({url:this.getRPC(),methodName:\"wp.getUsersBlogs\",params:e});return t.icon=chrome.extension.getURL(\"images/wordpress.ico\"),t}addPost(e){if(this.isTypecho)return{status:\"success\",post_id:\"1\"};var t=[0,this.user,this.pwd,e];this.url;return r({url:this.getRPC(),methodName:\"wp.newPost\",params:t})}editPost(e,t){var a=[0,this.user,this.pwd,t],s=this.getRPC(),n=this.isTypecho;return n?(a.push(!1),a[3]={title:t.post_title,description:t.post_content.trim()},console.log(\"params\",a)):(a[3]=e,a.push(t)),new Promise((t,i)=>{(async()=>{try{var o=await r({url:s,methodName:n?\"metaWeblog.newPost\":\"wp.editPost\",params:a});o.draftLink=this.url+\"?p=\"+e,console.log(\"Wordpress\",o),t(o)}catch(e){i(e)}})()})}uploadFile(e){this.isTypecho&&(e.bytes=e.bits,delete e.bits);var t=[0,this.user,this.pwd,e];this.url;return $.xmlrpc({url:this.getRPC(),methodName:\"wp.uploadFile\",params:t})}}t.a=s,window.WordpressDriver=s},function(e,t,a){\"use strict\";t.a=class{constructor(){this.skipReadImage=!0,this.name=\"toutiao\"}async getMetaData(){var e=await $.ajax({url:\"https://mp.toutiao.com/get_media_info/\"});return{uid:e.data.user.id,title:e.data.user.screen_name,avatar:e.data.user.https_avatar_url,supportTypes:[\"html\"],type:\"toutiao\",displayName:\"头条\",home:\"https://mp.toutiao.com/profile_v3/graphic/publish\",icon:\"https://sf1-ttcdn-tos.pstatp.com/obj/ttfe/pgcfe/sz/mp_logo.png\"}}async addPost(e){return{status:\"success\",post_id:0}}async editPost(e,t){var a=[];t.post_thumbnail_raw&&t.post_thumbnail_raw.images&&a.push({id:0,url:t.post_thumbnail_raw.url,uri:t.post_thumbnail_raw.images[0].origin_web_uri,origin_uri:t.post_thumbnail_raw.images[0].origin_web_uri,ic_uri:\"\",thumb_width:t.post_thumbnail_raw.images[0].width,thumb_height:t.post_thumbnail_raw.images[0].height}),await $.get(\"https://mp.toutiao.com/profile_v3/graphic/publish\");var r=await $.ajax({url:\"https://mp.toutiao.com/core/article/edit_article_post/?source=mp&type=article\",type:\"POST\",dataType:\"JSON\",data:{title:t.post_title,article_ad_type:3,article_type:0,from_diagnosis:0,origin_debut_check_pgc_normal:0,tree_plan_article:0,save:0,pgc_id:0,content:t.post_content,pgc_feed_covers:JSON.stringify(a)}});if(!r.data)throw new Error(r.message);return{status:\"success\",post_id:r.data.pgc_id,draftLink:\"https://mp.toutiao.com/profile_v3/graphic/publish?pgc_id=\"+r.data.pgc_id}}async uploadFile(e){var t=e.src,a=await $.ajax({url:\"https://mp.toutiao.com/tools/catch_picture/\",type:\"POST\",headers:{accept:\"*/*\"},data:{upfile:t,version:2}});if(a.images&&!a.images.length)throw new Error(\"图片上传失败 \"+t);return console.log(\"uploadFile\",a),[a]}async preEditPost(e){var t=$(\"<div>\");$(\"body\").append(t),t.html(e.content);var a=t,r=a.find(\"a\");for(let e=0;e<r.length;e++){const t=r.eq(e);try{t.after(t.html()).remove()}catch(e){}}r=a.find(\"iframe\");for(let e=0;e<r.length;e++){const t=r.eq(e);try{t.remove()}catch(e){}}try{const e=a.find(\"img\");for(let t=0;t<e.length;t++){const a=e.eq(t),r=a.attr(\"src\");r&&r.indexOf(\".svg\")>-1&&(console.log(\"remove svg Image\"),a.remove())}const t=a.find(\"qqmusic\");t.next().remove(),t.remove()}catch(e){}e.content=$(\"<div>\").append(a.clone()).html(),console.log(\"post\",e)}editImg(e,t){e.attr(\"web_uri\",t.images[0].origin_web_uri)}}},function(e,t,a){\"use strict\";var r=null;t.a=class{constructor(){this.name=\"weibo\"}async getMetaData(){var e=await $.get(\"https://card.weibo.com/article/v3/editor\"),t=e.indexOf(\"$CONFIG\"),a=e.indexOf(\"<\\/script>\",t),s=e.substring(t-12,a);if(s.indexOf(\"CONFIG\")>-1){var n=new Function(s+\" return $CONFIG;\")();return r=n,{uid:n.uid,title:n.nick,avatar:n.avatar_large,supportTypes:[\"html\"],displayName:\"微博\",type:\"weibo\",home:\"https://card.weibo.com/article/v3/editor\",icon:\"https://weibo.com/favicon.ico\"}}throw new Error(\"not found\")}async addPost(e){if(1e5!=(a=await $.post(\"https://card.weibo.com/article/v3/aj/editor/draft/create?uid=\"+r.uid)).code)throw new Error(a.msg);console.log(a);var t=a.data.id,a=await $.ajax({url:\"https://card.weibo.com/article/v3/aj/editor/draft/save?uid=\"+r.uid+\"&id=\"+t,type:\"POST\",dataType:\"JSON\",headers:{accept:\"application/json\"},data:{id:t,title:e.post_title,subtitle:\"\",type:\"\",status:\"0\",publish_at:\"\",error_msg:\"\",error_code:\"0\",collection:\"[]\",free_content:\"\",content:e.post_content,cover:\"\",summary:\"\",writer:\"\",extra:\"null\",is_word:\"0\",article_recommend:\"[]\",follow_to_read:\"1\",isreward:\"1\",pay_setting:'{\"ispay\":0,\"isvclub\":0}',source:\"0\",action:\"1\",content_type:\"0\",save:\"1\"}});return console.log(a),{status:\"success\",post_id:t}}async preEditPost(e){var t=new RegExp(\">[\\ts ]*<\",\"g\"),a=e.content.replace(t,\"><\");e.content=a}async editPost(e,t){var a=await $.ajax({url:\"https://card.weibo.com/article/v3/aj/editor/draft/save?uid=\"+r.uid+\"&id=\"+e,type:\"POST\",dataType:\"JSON\",headers:{accept:\"application/json\"},data:{id:e,title:t.post_title,subtitle:\"\",type:\"\",status:\"0\",publish_at:\"\",error_msg:\"\",error_code:\"0\",collection:\"[]\",free_content:\"\",content:t.post_content,cover:t.post_thumbnail_raw?t.post_thumbnail_raw.url:\"\",summary:\"\",writer:\"\",extra:\"null\",is_word:\"0\",article_recommend:\"[]\",follow_to_read:\"1\",isreward:\"1\",pay_setting:'{\"ispay\":0,\"isvclub\":0}',source:\"0\",action:\"1\",content_type:\"0\",save:\"1\"}});return console.log(a),{status:\"success\",post_id:e,draftLink:\"https://card.weibo.com/article/v3/editor#/draft/\"+e}}untiImageDone(e){return new Promise((t,a)=>{!async function a(){var s=await $.ajax({url:\"https://card.weibo.com/article/v3/aj/editor/plugins/asyncimginfo?uid=\"+r.uid,type:\"POST\",headers:{accept:\"*/*\",\"x-requested-with\":\"fetch\"},data:{\"urls[0]\":e}});1==s.data[0].task_status_code?t(s.data[0]):setTimeout(a,1e3)}()})}async uploadFile(e){var t=e.src,a=(await $.ajax({url:\"https://card.weibo.com/article/v3/aj/editor/plugins/asyncuploadimg?uid=\"+r.uid,type:\"POST\",headers:{accept:\"*/*\",\"x-requested-with\":\"fetch\"},data:{\"urls[0]\":t}}),await this.untiImageDone(t));return[{id:a.pid,object_key:a.pid,url:a.url}]}async uploadFileOld(e){var t=new Blob([e.bits]);console.log(\"uploadFile\",e,t);var a=await $.ajax({url:\"https://picupload.weibo.com/interface/pic_upload.php?app=miniblog&s=json&p=1&data=1&url=&markpos=1&logo=0&nick=\",type:\"POST\",processData:!1,data:new Blob([e.bits])});return console.log(e,a),[{id:a.data.pics.pic_1.pid,object_key:a.data.pics.pic_1.pid,url:\"https://wx3.sinaimg.cn/large/\"+a.data.pics.pic_1.pid+\".jpg\"}]}}},function(e,t,a){\"use strict\";var r=null,s={};window.onmessage=(e=>{var t=JSON.parse(e.data);t.eventId&&s[t.eventId]&&s[t.eventId](t.err,t.data)});t.a=class{constructor(){this.name=\"segmentfault\"}async getMetaData(){var e=await $.get(\"https://segmentfault.com/user/settings\"),t=(new DOMParser).parseFromString(e,\"text/html\").getElementsByClassName(\"user-avatar\")[0];if(!t)throw Error(\"not found\");var a=t.href.split(\"/\").pop(),s=t.style[\"background-image\"].replace('url(\"',\"\").replace('\")',\"\");return console.log(t.href,t.style[\"background-image\"].replace('url(\"',\"\").replace('\")',\"\")),r||((r=document.createElement(\"iframe\")).src=\"https://segmentfault.com/write?freshman=1\",document.body.append(r)),{uid:a,title:a,avatar:s,type:\"segmentfault\",displayName:\"Segmentfault\",supportTypes:[\"markdown\"],home:\"https://segmentfault.com/user/draft\",icon:\"https://static.segmentfault.com/v-5d8c9d24/global/img/favicon.ico\"}}async addPost(e){console.log(\"addPost\",r);var t=await function(e){return new Promise((t,a)=>{var n=Date.now()+Math.random();e.eventId=n,s[n]=function(e,r){e?a(e):t(r)},r.contentWindow.postMessage(JSON.stringify(e),\"*\")})}({type:\"sendPost\",data:{type:1,url:\"\",blogId:0,isTiming:0,created:\"\",weibo:0,license:0,tags:\"\",title:e.post_title,text:e.markdown,articleId:\"\",draftId:\"\",id:\"\"}});return console.log(\"data\",t),{status:\"success\",post_id:t.data}}async editPost(e,t){return{status:\"success\",post_id:e,draftLink:\"https://segmentfault.com/write?draftId=\"+e}}async uploadFile(e){}async uploadFileByForm(e){var t=new FormData;return t.append(\"image\",e),\"https://image-static.segmentfault.com/\"+(await axios({url:\"https://segmentfault.com/img/upload/image\",method:\"post\",data:t,headers:{\"Content-Type\":\"multipart/form-data\"}})).data[2]}}},function(e,t,a){\"use strict\";t.a=class{constructor(e){this.name=\"juejin\",this.uploadFile=!0,this.account=e,this.skipUpload=!0,console.log(\"Juejin\",\"initliaze\",e,this)}async getMetaData(){var e=await $.get(\"https://juejin.im/auth\");return console.log(e),{uid:e.userId,title:e.user.username,avatar:e.user.avatarLarge,type:\"juejin\",displayName:\"掘金\",raw:e,supportTypes:[\"markdown\"],home:\"https://juejin.im/editor/drafts\",icon:\"https://gold-cdn.xitu.io/favicons/favicon.ico\"}}async addPost(e,t){console.log(\"addPost\",t),console.log(t.account,e.markdown);var a=await $.ajax({url:\"https://post-storage-api-ms.juejin.im/v1/draftStorage\",type:\"POST\",dataType:\"JSON\",headers:{accept:\"application/json\"},data:{uid:t.account.uid,device_id:t.account.raw.clientId,token:t.account.raw.token,src:\"web\",category:\"5562b428e4b00c57d9b94b9d\",content:\"\",html:e.post_content,markdown:e.markdown,screenshot:\"\",isTitleImageFullscreen:0,tags:\"\",title:e.post_title,type:\"markdown\"}});return console.log(a),{status:\"success\",post_id:a.d[0]}}async editPost(e,t){return{status:\"success\",post_id:e,draftLink:\"https://juejin.im/editor/drafts/\"+e}}async uploadFile(e){e.src;var t=await $.ajax({url:\"https://cdn-ms.xitu.io/v1/fetch\",type:\"POST\",contentType:\"application/json\",xhrFields:{withCredentials:!0},headers:{accept:\"application/json\"},data:JSON.stringify({bucket:\"gold-user-assets\",url:\"1\"})});return console.log(t),[]}async uploadFileByForm(e){var t=new FormData;return t.append(\"file\",e),(await axios({url:\"https://cdn-ms.juejin.im/v1/upload?bucket=gold-user-assets\",method:\"post\",data:t,headers:{\"Content-Type\":\"multipart/form-data\"}})).data.d.url.http}}},function(e,t,a){\"use strict\";t.a=class{constructor(){this.name=\"csdn\"}async getMetaData(){var e=await $.get(\"https://me.csdn.net/api/user/show\");return{uid:e.data.csdnid,title:e.data.username,avatar:e.data.avatarurl,type:\"csdn\",displayName:\"CSDN\",supportTypes:[\"markdown\"],home:\"https://mp.csdn.net/\",icon:\"https://csdnimg.cn/public/favicon.ico\"}}async addPost(e){var t=await $.ajax({url:\"https://mp.csdn.net/mdeditor/saveArticle\",type:\"POST\",dataType:\"JSON\",headers:{accept:\"application/json\"},data:{title:e.post_title,markdowncontent:e.markdown,content:e.post_content,id:\"\",readType:\"public\",tags:\"\",status:2,categories:\"\",type:\"\",original_link:\"\",authorized_status:\"undefined\",articleedittype:1,Description:\"\",resource_url:\"\",csrf_token:\"\"}});return console.log(t),{status:\"success\",post_id:t.data.id}}async editPost(e,t){return{status:\"success\",post_id:e,draftLink:\"https://mp.csdn.net/mdeditor/\"+e}}}},function(e,t,a){\"use strict\";t.a=class{constructor(){this.name=\"cnblog\"}async getMetaData(){var e=await $.get(\"https://home.cnblogs.com/user/CurrentUserInfo\"),t=(new DOMParser).parseFromString(e,\"text/html\").getElementsByClassName(\"pfs\")[0],a=t.parentNode.href,r=a.split(\"/\");r.pop();var s=r.pop();return console.log(a),{uid:s,title:s,avatar:t.src,type:\"cnblog\",displayName:\"CnBlog\",supportTypes:[\"markdown\"],home:\"https://i.cnblogs.com/EditArticles.aspx?IsDraft=1\",icon:\"https://common.cnblogs.com/favicon.ico\"}}async addPost(e){var t=null;try{var a=await $.ajax({url:\"https://i.cnblogs.com/EditArticles.aspx?opt=1\",type:\"POST\",dataType:\"JSON\",headers:{},data:{__VIEWSTATE:\"\",__VIEWSTATEGENERATOR:\"\",Editor$Edit$txbTitle:e.post_title,Editor$Edit$EditorBody:e.markdown,Editor$Edit$Advanced$ckbPublished:\"on\",Editor$Edit$Advanced$chkDisplayHomePage:\"on\",Editor$Edit$Advanced$chkComments:\"on\",Editor$Edit$Advanced$chkMainSyndication:\"on\",Editor$Edit$Advanced$txbEntryName:\"\",Editor$Edit$Advanced$txbExcerpt:\"\",Editor$Edit$Advanced$txbTag:\"\",Editor$Edit$Advanced$tbEnryPassword:\"\",Editor$Edit$lkbDraft:\"存为草稿\"}});console.log(\"CNBLOG addPost\",a)}catch(e){var r=(new DOMParser).parseFromString(e.responseText,\"text/html\"),s=r.getElementById(\"TipsPanel_LinkEdit\"),n=r.getElementsByClassName(\"ErrorPanel\")[0];if(s)t=s.href.split(\"postid=\")[1],console.log(\"CNBLOG error\",s,s.href.query);else if(n)throw Error(n.innerText);console.log(\"CNBLOG error\",e.responseText,r,s)}return{status:\"success\",post_id:t}}async editPost(e,t){return{status:\"success\",post_id:e,draftLink:\"https://i.cnblogs.com/EditArticles.aspx?postid=\"+e+\"&update=1\"}}}},function(e,t,a){\"use strict\";var r=null;t.a=class{constructor(){this.meta=r,this.name=\"weixin\"}async getMetaData(){var e=await $.ajax({url:\"https://mp.weixin.qq.com/\"}),t=$(e),a=$(\"<div>\").append(t.clone()),s=a.find(\"script\").eq(0).text();s=s.substring(s.indexOf(\"window.wx.commonData\"));var n=new Function(\"window.wx = {}; window.handlerNickname = function(){};\"+s+\"; return window.wx;\")();console.log(s,n);var i=Object.assign({},n.commonData);if(delete window.wx,!i.data.t)throw new Error(\"未登录\");var o={uid:i.data.user_name,title:i.data.nick_name,token:i.data.t,commonData:i,avatar:a.find(\".weui-desktop-account__thumb\").eq(0).attr(\"src\"),type:\"weixin\",supportTypes:[\"html\"],home:\"https://mp.weixin.qq.com\",icon:\"https://mp.weixin.qq.com/favicon.ico\"};return r=o,console.log(\"weixinMetaCache\",r),o}async addPost(e){return{status:\"success\",post_id:0}}async editPost(e,t){console.log(\"editPost\",t.post_thumbnail);var a=await $.ajax({url:\"https://mp.weixin.qq.com/cgi-bin/operate_appmsg?t=ajax-response&sub=create&type=10&token=\"+r.token+\"&lang=zh_CN\",type:\"POST\",dataType:\"JSON\",data:{token:r.token,lang:\"zh_CN\",f:\"json\",ajax:\"1\",random:Math.random(),AppMsgId:\"\",count:\"1\",data_seq:\"0\",operate_from:\"Chrome\",isnew:\"0\",ad_video_transition0:\"\",can_reward0:\"0\",related_video0:\"\",is_video_recommend0:\"-1\",title0:t.post_title,author0:\"\",writerid0:\"0\",fileid0:\"\",digest0:t.post_title,auto_gen_digest0:\"1\",content0:t.post_content,sourceurl0:\"\",need_open_comment0:\"1\",only_fans_can_comment0:\"0\",cdn_url0:\"\",cdn_235_1_url0:\"\",cdn_1_1_url0:\"\",cdn_url_back0:\"\",crop_list0:\"\",music_id0:\"\",video_id0:\"\",voteid0:\"\",voteismlt0:\"\",supervoteid0:\"\",cardid0:\"\",cardquantity0:\"\",cardlimit0:\"\",vid_type0:\"\",show_cover_pic0:\"0\",shortvideofileid0:\"\",copyright_type0:\"0\",releasefirst0:\"\",platform0:\"\",reprint_permit_type0:\"\",allow_reprint0:\"\",allow_reprint_modify0:\"\",original_article_type0:\"\",ori_white_list0:\"\",free_content0:\"\",fee0:\"0\",ad_id0:\"\",guide_words0:\"\",is_share_copyright0:\"0\",share_copyright_url0:\"\",source_article_type0:\"\",reprint_recommend_title0:\"\",reprint_recommend_content0:\"\",share_page_type0:\"0\",share_imageinfo0:'{\"list\":[]}',share_video_id0:\"\",dot0:\"{}\",share_voice_id0:\"\",insert_ad_mode0:\"\",categories_list0:\"[]\",sections0:'[{\"section_index\":1000000,\"text_content\":\"​kkk\",\"section_type\":9,\"ad_available\":false}]',compose_info0:'{\"list\":[{\"blockIdx\":1,\"content\":\"<p>​kkk<br></p>\",\"width\":574,\"height\":27,\"topMargin\":0,\"blockType\":9,\"background\":\"rgba(0, 0, 0, 0)\",\"text\":\"kkk\",\"textColor\":\"rgb(51, 51, 51)\",\"textFontSize\":\"17px\",\"textBackGround\":\"rgba(0, 0, 0, 0)\"}]}'}});if(!a.appMsgId){var s=function(e){var t,a={errmsg:\"\",index:!1};switch(void 0!==e.ret?t=1*e.ret:e.base_resp&&void 0!==e.base_resp.ret&&(t=1*e.base_resp.ret),1*t){case-8:case-6:e.ret=\"-6\",a.errmsg=\"请输入验证码\";break;case 62752:a.errmsg=\"可能含有具备安全风险的链接，请检查\";break;case 64505:a.errmsg=\"发送预览失败，请稍后再试\";break;case 64504:a.errmsg=\"保存图文消息发送错误，请稍后再试\";break;case 64518:a.errmsg=\"正文只能包含一个投票\";break;case 10704:case 10705:a.errmsg=\"该素材已被删除\";break;case 10701:a.errmsg=\"用户已被加入黑名单，无法向其发送消息\";break;case 10703:a.errmsg=\"对方关闭了接收消息\";break;case 10700:case 64503:a.errmsg=\"1.接收预览消息的微信尚未关注公众号，请先扫码关注<br /> 2.如果已经关注公众号，请查看微信的隐私设置（在手机微信的“我->设置->隐私->添加我的方式”中），并开启“可通过以下方式找到我”的“手机号”、“微信号”、“QQ号”，否则可能接收不到预览消息\";break;case 64502:a.errmsg=\"你输入的微信号不存在，请重新输入\";break;case 64501:a.errmsg=\"你输入的帐号不存在，请重新输入\";break;case 412:a.errmsg=\"图文中含非法外链\";break;case 64515:a.errmsg=\"当前素材非最新内容，请重新打开并编辑\";break;case 320001:a.errmsg=\"该素材已被删除，无法保存\";break;case 64702:a.errmsg=\"标题超出64字长度限制\";break;case 64703:a.errmsg=\"摘要超出120字长度限制\";break;case 64704:a.errmsg=\"推荐语超出300字长度限制\";break;case 64708:a.errmsg=\"推荐语超出140字长度限制\";break;case 64515:a.errmsg=\"当前素材非最新内容\";break;case 200041:a.errmsg=\"此素材有文章存在违规，无法编辑\";break;case 64506:a.errmsg=\"保存失败,链接不合法\";break;case 64507:a.errmsg=\"内容不能包含外部链接，请输入http://或https://开头的公众号相关链接\";break;case 64510:a.errmsg=\"内容不能包含音频，请调整\";break;case 64511:a.errmsg=\"内容不能包多个音频，请调整\";break;case 64512:a.errmsg=\"文章中音频错误,请使用音频添加按钮重新添加。\";break;case 64508:a.errmsg=\"查看原文链接可能具备安全风险，请检查\";break;case 64550:a.errmsg=\"请勿插入不合法的图文消息链接\";break;case 64558:a.errmsg=\"请勿插入图文消息临时链接，链接会在短期失效\";break;case 64559:a.errmsg=\"请勿插入未群发的图文消息链接\";break;case-99:case 64705:a.errmsg=\"内容超出字数，请调整\";break;case-1:a.errmsg=\"系统错误，请注意备份内容后重试\";break;case-2:case 200002:a.errmsg=\"参数错误，请注意备份内容后重试\";break;case 64509:a.errmsg=\"正文中不能包含超过3个视频，请重新编辑正文后再保存。\";break;case-5:a.errmsg=\"服务错误，请注意备份内容后重试。\";break;case 64513:a.errmsg=\"请从正文中选择封面，再尝试保存。\";break;case-206:a.errmsg=\"目前，服务负荷过大，请稍后重试。\";break;case 10801:a.errmsg=\"标题不能有违反公众平台协议、相关法律法规和政策的内容，请重新编辑。\",a.index=1*e.msg;break;case 10802:a.errmsg=\"作者不能有违反公众平台协议、相关法律法规和政策的内容，请重新编辑。\",a.index=1*e.msg;break;case 10803:a.errmsg=\"敏感链接，请重新添加。\",a.index=1*e.msg;break;case 10804:a.errmsg=\"摘要不能有违反公众平台协议、相关法律法规和政策的内容，请重新编辑。\",a.index=1*e.msg;break;case 10806:a.errmsg=\"正文不能有违反公众平台协议、相关法律法规和政策的内容，请重新编辑。\",a.index=1*e.msg;break;case 10808:a.errmsg=\"推荐语不能有违反公众平台协议、相关法律法规和政策的内容，请重新编辑。\",a.index=1*e.msg;break;case 10807:a.errmsg=\"内容不能违反公众平台协议、相关法律法规和政策，请重新编辑。\";break;case 200003:a.errmsg=\"登录态超时，请重新登录。\";break;case 64513:a.errmsg=\"封面必须存在正文中，请检查封面\";break;case 64551:a.errmsg=\"请检查图文消息中的微视链接后重试。\";break;case 64552:a.errmsg=\"请检查阅读原文中的链接后重试。\";break;case 64553:a.errmsg=\"请不要在图文消息中插入超过5张卡券。请删减卡券后重试。\";break;case 64554:a.errmsg=\"在当前情况下不允许在图文消息中插入卡券，请删除卡券后重试。\";break;case 64555:a.errmsg=\"请检查图文消息卡片跳转的链接后重试。\";break;case 64556:a.errmsg=\"卡券不属于该公众号，请删除后重试\";break;case 64557:a.errmsg=\"卡券无效，请删除后重试。\";break;case 13002:a.errmsg=\"该广告卡片已过期，删除后才可保存成功\",a.index=1*e.msg;break;case 13003:a.errmsg=\"已有文章插入过该广告卡片，一个广告卡片仅可插入一篇文章\",a.index=1*e.msg;break;case 13004:a.errmsg=\"该广告卡片与图文消息位置不一致\",a.index=1*e.msg;break;case 15801:case 15802:case 15803:case 15804:case 15805:case 15806:a.errmsg=e.remind_wording||\"你所编辑的内容可能含有违反微信公众平台平台协议、相关法律法规和政策的内容\";break;case 1530503:case 1530504:a.errmsg=\"请勿添加其他公众号的主页链接\";break;case 1530510:a.errmsg=\"链接已失效，请在手机端重新复制链接\";break;case 153007:case 153008:case 153009:case 153010:a.errmsg=\"很抱歉，原创声明不成功|你的文章内容未达到声明原创的要求，满足以下任一条件可发起声明：<br />1、文章文字字数大于300字，且自己创作的内容大于引用内容<br />2、文章文字字数小于300字，无视频，且图片（包括封面图）均为你已成功声明原创的图片<br />说明：上述要求中，文章文字字数不包含标点符号和空格，请知悉。\";break;case 153200:a.errmsg=\"无权限声明原创，取消声明后重试\";break;case 1530511:a.errmsg=\"链接已失效，请在手机端重新复制链接\";break;case 220001:a.errmsg='\"素材管理\"中的存储数量已达到上限，请删除后再操作。';break;case 220002:a.errmsg=\"你的图片库已达到存储上限，请进行清理。\";break;case 153012:a.errmsg=\"请设置转载类型\";break;case 200042:a.errmsg=\"图文中包含的小程序素材不能多于50个、小程序帐号不能多于10个\";break;case 200043:a.errmsg=\"图文中包含没有关联的小程序，请删除后再保存\";break;case 64601:a.errmsg=\"一篇文章只能插入一个广告卡片\";break;case 64602:a.errmsg=\"尚未开通文中广告位，但文章中有广告\";break;case 64603:a.errmsg=\"文中广告前不足300字\";break;case 64604:a.errmsg=\"文中广告后不足300字\";break;case 64605:a.errmsg=\"文中不能同时插入文中广告和互选广告\";break;case 65101:a.errmsg=\"图文模版数量已达到上限，请删除后再操作\";break;case 64560:a.errmsg=\"请勿插入历史图文消息页链接\";break;case 64561:a.errmsg=\"请勿插入mp.weixin.qq.com域名下的非图文消息链接\";break;case 64562:a.errmsg=\"请勿插入非mp.weixin.qq.com域名的链接\";break;case 153013:a.errmsg=\"文章内含有投票，不能设置为开放转载\";break;case 153014:a.errmsg=\"文章内含有卡券，不能设置为开放转载\";break;case 153015:case 153016:a.errmsg=\"文章内含有小程序链接，不能设置为开放转载\";break;case 153017:a.errmsg=\"文章内含有小程序卡片，不能设置为开放转载\";break;case 153018:a.errmsg=\"文章内含有商品，不能设置为开放转载\";break;case 153019:case 153020:case 153021:a.errmsg=\"文章内含有广告卡片，不能设置为开放转载\";break;case 153101:a.errmsg=\"含有原文已删除的转载文章，请删除后重试\";break;case 64707:a.errmsg=\"赞赏账户授权失效或者状态异常\";break;case 420001:a.errmsg=\"封面图不支持GIF，请更换\";break;case 353004:a.errmsg=\"不支持添加商品，请删除后重试\";break;case 442001:a.errmsg=\"帐号新建/编辑素材能力已被封禁，暂不可使用。\";break;default:a.errmsg=\"系统繁忙，请稍后重试\"}return a}(a);throw console.log(\"error\",s),new Error(\"同步失败 错误内容：\"+(s&&s.errmsg?s.errmsg:a.ret))}return{status:\"success\",post_id:a.appMsgId,draftLink:\"https://mp.weixin.qq.com/cgi-bin/appmsg?t=media/appmsg_edit&action=edit&type=10&appmsgid=\"+a.appMsgId+\"&token=\"+r.token+\"&lang=zh_CN\"}}async uploadFile(e){var t=e.src,a=await $.ajax({url:\"https://mp.weixin.qq.com/cgi-bin/uploadimg2cdn?lang=zh_CN&token=\"+r.token+\"&t=\"+Math.random(),type:\"POST\",dataType:\"JSON\",data:{imgurl:t,t:\"ajax-editor-upload-img\",token:r.token,lang:\"zh_CN\",f:\"json\",ajax:\"1\"}});if(0!=a.errcode)throw new Error(\"图片上传失败\"+t);return console.log(a),[{id:\"aaa\",object_key:\"aaa\",url:a.url}]}async preEditPost(e){var t=$(\"<div>\");$(\"body\").append(t),e.inline_content&&(e.content=e.inline_content),t.html(e.content);var a=t,r=a.find(\"p\");for(let e=0;e<r.length;e++){const t=r.eq(e);try{t.next().children(\"img\").length;var s=$(\"<span></span>\");s.html(t.html()),t.html(\"\"),t.append(s)}catch(e){}}r=a.find(\"img\");for(let e=0;e<r.length;e++){const t=r.eq(e),a=t.parent();try{t.removeAttr(\"_src\"),t.attr(\"style\",\"\"),a.replaceWith(\"<p>\"+a.html()+\"</p>\")}catch(e){}}var n=a.find(\"a\");for(let e=0;e<n.length;e++){const t=n.eq(e);try{t.after(t.html()).remove()}catch(e){}}a.find(\"li\").each(function(e,t){var a=$(this);a.html($(\"<p></p>\").append(a.html()))}),a.find(\"p\").each(function(e,t){var a=$(this),r=a.text(),s=a.find(\"img\"),n=a.find(\"br\");\"\"==r&&(s.length||n.length&&a.remove())}),a.find(\"br\").each(function(e,t){var a=$(this);a.next().length||a.remove()}),e.content=$(\"<div>\").append(\"<section style='margin-left: 6px;margin-right: 6px;line-height: 1.75em;'>\"+a.clone().html()+\"</section>\").html(),console.log(\"post.content\",e.content);var i=juice.inlineContent(e.content,'\\n    /**\\n    * common style\\n    */\\n\\n   html, address,\\n   blockquote,\\n   body, dd, div,\\n   dl, dt, fieldset, form,\\n   frame, frameset,\\n   h1, h2, h3, h4,\\n   h5, h6, noframes,\\n   ol, p, ul, center,\\n   dir, hr, menu, pre   { display: block; unicode-bidi: embed }\\n   li              { display: list-item }\\n   head            { display: none }\\n   table           { display: table }\\n   tr              { display: table-row }\\n   thead           { display: table-header-group }\\n   tbody           { display: table-row-group }\\n   tfoot           { display: table-footer-group }\\n   col             { display: table-column }\\n   colgroup        { display: table-column-group }\\n   td, th          { display: table-cell }\\n   caption         { display: table-caption }\\n   th              { font-weight: bolder; text-align: center }\\n   caption         { text-align: center }\\n   body            { margin: 8px }\\n   h1              { font-size: 2em; margin: .67em 0 }\\n   h2              { font-size: 1.5em; margin: .75em 0 }\\n   h3              { font-size: 1.17em; margin: .83em 0 }\\n   h4, p,\\n   blockquote, ul,\\n   fieldset, form,\\n   ol, dl, dir,\\n   menu            { margin: 1.12em 0 }\\n   h5              { font-size: .83em; margin: 1.5em 0 }\\n   h6              { font-size: .75em; margin: 1.67em 0 }\\n   h1, h2, h3, h4,\\n   h5, h6, b,\\n   strong          { font-weight: bolder }\\n   blockquote      { margin-left: 40px; margin-right: 40px }\\n   i, cite, em,\\n   var, address    { font-style: italic }\\n   pre, tt, code,\\n   kbd, samp       { font-family: monospace }\\n   pre             { white-space: pre }\\n   button, textarea,\\n   input, select   { display: inline-block }\\n   big             { font-size: 1.17em }\\n   small, sub, sup { font-size: .83em }\\n   sub             { vertical-align: sub }\\n   sup             { vertical-align: super }\\n   table           { border-spacing: 2px; }\\n   thead, tbody,\\n   tfoot           { vertical-align: middle }\\n   td, th, tr      { vertical-align: inherit }\\n   s, strike, del  { text-decoration: line-through }\\n   hr              { border: 1px inset }\\n   ol, ul, dir,\\n   menu, dd        { margin-left: 40px }\\n   ol              { list-style-type: decimal }\\n   ol ul, ul ol,\\n   ul ul, ol ol    { margin-top: 0; margin-bottom: 0 }\\n   u, ins          { text-decoration: underline }\\n   br:before       { content: \"A\"; white-space: pre-line }\\n   center          { text-align: center }\\n   :link, :visited { text-decoration: underline }\\n   :focus          { outline: thin dotted invert }\\n   \\n   /* Begin bidirectionality settings (do not change) */\\n   BDO[DIR=\"ltr\"]  { direction: ltr; unicode-bidi: bidi-override }\\n   BDO[DIR=\"rtl\"]  { direction: rtl; unicode-bidi: bidi-override }\\n   \\n   *[DIR=\"ltr\"]    { direction: ltr; unicode-bidi: embed }\\n   *[DIR=\"rtl\"]    { direction: rtl; unicode-bidi: embed }\\n   \\n   @media print {\\n     h1            { page-break-before: always }\\n     h1, h2, h3,\\n     h4, h5, h6    { page-break-after: avoid }\\n     ul, ol, dl    { page-break-before: avoid }\\n   }\\n   h1,\\n   h2,\\n   h3,\\n   h4,\\n   h5,\\n   h6 {\\n     font-weight: bold;\\n   }\\n   \\n   h1 {\\n     font-size: 1.25em;\\n     line-height: 1.4em;\\n   }\\n   \\n   h2 {\\n     font-size: 1.125em;\\n   }\\n   \\n   h3 {\\n     font-size: 1.05em;\\n   }\\n   \\n   h4,\\n   h5,\\n   h6 {\\n     font-size: 1em;\\n     margin: 1em 0;\\n   }\\n\\n    p {\\n      color: rgb(51, 51, 51);\\n      font-size: 15px;\\n    }\\n\\n    li p {\\n      margin: 0;\\n    }\\n   ');console.log(\"inlineCssHTML new\",i),e.content=i}}},function(e,t,a){\"use strict\";t.a=class{constructor(){this.skipReadImage=!0}async getMetaData(){var e=await $.ajax({url:\"https://mp.yidianzixun.com\"}),t=$(e),a=$(\"<div>\").append(t.clone()).find(\"#__val_\").text();console.log(\"YiDian\",a);var r=new Function(a+\"; return window.mpuser;\")(),s=Object.assign({},r);if(console.log(s),!s.id)throw new Error(\"未登录\");return{uid:s.id,title:s.media_name,commonData:s,avatar:s.media_pic,type:\"yidian\",supportTypes:[\"html\"],home:\"https://mp.yidianzixun.com\",icon:\"https://www.yidianzixun.com/favicon.ico\"}}async addPost(e){return{status:\"success\",post_id:0}}async editPost(e,t){var a=await $.ajax({url:\"https://mp.yidianzixun.com/model/Article\",type:\"POST\",dataType:\"JSON\",data:{title:t.post_title,cate:\"\",cateB:\"\",coverType:\"default\",covers:[],content:t.post_content,hasSubTitle:0,subTitle:\"\",original:0,reward:0,videos:[],audios:[],votes:{vote_id:\"\",vote_options:[],vote_end_time:\"\",vote_title:\"\",vote_type:1,isAdded:!1},images:[],goods:[],is_mobile:0,status:0,import_url:\"\",import_hash:\"\",image_urls:{},minTimingHour:3,maxTimingDay:7,tags:[],isPubed:!1,lastSaveTime:\"\",dirty:!1,editorType:\"articleEditor\",activity_id:0,join_activity:0,notSaveToStore:!0}});if(!a.id)throw new Error(\"同步错误\"+JSON.stringify(a));return{status:\"success\",post_id:a.id,draftLink:\"https://mp.yidianzixun.com/#/Writing/\"+a.id}}async uploadFile(e){var t=e.src,a=await $.get(\"https://mp.yidianzixun.com/api/getImageFromUrl?src=\"+encodeURIComponent(t));if(\"success\"!=a.status)throw new Error(\"图片上传失败 \"+t);return console.log(\"uploadFile\",a),[{id:\"\",object_key:\"\",url:a.inner_addr}]}async preEditPost(e){}}}]);for (var k in modules) exports[k] = modules[k];"
